<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Ruby | blog.kobtea.net]]></title>
  <link href="http://blog.kobtea.net/blog/categories/ruby/atom.xml" rel="self"/>
  <link href="http://blog.kobtea.net/"/>
  <updated>2014-02-15T23:50:10+09:00</updated>
  <id>http://blog.kobtea.net/</id>
  <author>
    <name><![CDATA[kobtea]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[MBAã«Rubyç’°å¢ƒã‚’ä½œã‚‹]]></title>
    <link href="http://blog.kobtea.net/blog/2013/09/23/install-ruby-on-mba/"/>
    <updated>2013-09-23T00:17:00+09:00</updated>
    <id>http://blog.kobtea.net/blog/2013/09/23/install-ruby-on-mba</id>
    <content type="html"><![CDATA[<p><code>bash
$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.8.4
BuildVersion:   12E3067
</code></p>

<p><a href="https://github.com/sstephenson/rbenv">rbenv</a>ã®readmeã«ãã£ã¦ã‚„ã‚‹ã€‚<br/>
PATHã«ã¤ã„ã¦è§£èª¬ã¾ã§ã—ã¦ãã‚Œã‚‹ã¨ã‹ãƒã‚¸å¤©ä½¿ã€‚</p>

<h2>rbenvã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p>```bash</p>

<h1>homebrewã‚’æœ€æ–°ã®çŠ¶æ…‹ã«</h1>

<p>$ brew update
$ brew upgrade</p>

<h1>rbenvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1>

<p>$ brew install rbenv
==> Downloading <a href="https://github.com/sstephenson/rbenv/archive/v0.4.0.tar.gz">https://github.com/sstephenson/rbenv/archive/v0.4.0.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> Caveats
To use Homebrew&rsquo;s directories rather than ~/.rbenv add to your profile:
  export RBENV_ROOT=/usr/local/var/rbenv</p>

<p>To enable shims and autocompletion add to your profile:
  if which rbenv > /dev/null; then eval &ldquo;$(rbenv init &ndash;)&rdquo;; fi
==> Summary
ğŸº  /usr/local/Cellar/rbenv/0.4.0: 31 files, 152K, built in 2 seconds</p>

<h1>ruby-buildã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1>

<p>$ brew install ruby-build</p>

<h6>################################################################## 100.0%</h6>

<p>==> ./configure &mdash;prefix=/usr/local/Cellar/autoconf/2.69
==> make install
ğŸº  /usr/local/Cellar/autoconf/2.69: 69 files, 2.0M, built in 8 seconds
==> Installing ruby-build
==> Downloading <a href="https://github.com/sstephenson/ruby-build/archive/v20130907.tar.gz">https://github.com/sstephenson/ruby-build/archive/v20130907.tar.gz</a></p>

<h6>################################################################## 100.0%</h6>

<p>==> ./install.sh
ğŸº  /usr/local/Cellar/ruby-build/20130907: 83 files, 368K, built in 2 seconds
```</p>

<p>profileã¨ã‹rcã«ä»¥ä¸‹ã‚’è¿½è¨˜ã™ã‚‹ã€‚</p>

<p><code>bash
$ echo 'if which rbenv &gt; /dev/null; then eval "$(rbenv init -)"; fi' &gt;&gt; ~/.zprofile
$ source ~/.zprofile
</code></p>

<p>```bash
$ rbenv &mdash;help
rbenv 0.4.0
Usage: rbenv <command> [<args>]</p>

<p>Some useful rbenv commands are:
   commands    List all available rbenv commands
   local       Set or show the local application-specific Ruby version
   global      Set or show the global Ruby version
   shell       Set or show the shell-specific Ruby version
   install     Install a Ruby version using the ruby-build plugin
   uninstall   Uninstall a specific Ruby version
   rehash      Rehash rbenv shims (run this after installing executables)
   version     Show the current Ruby version and its origin
   versions    List all Ruby versions available to rbenv
   which       Display the full path to an executable
   whence      List all Ruby versions that contain the given executable</p>

<p>See `rbenv help <command>&lsquo; for information on a specific command.
For full documentation, see: <a href="https://github.com/sstephenson/rbenv#readme">https://github.com/sstephenson/rbenv#readme</a>
```</p>

<h2>rbenv-default-gemsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>

<p>ã¤ã„ã§ã«<a href="https://github.com/sstephenson/rbenv-default-gems">rbenv-default-gems</a>ã‚’å…¥ã‚Œã¦ãŠãã€‚<br/>
<code>rbenv install &lt;version&gt;</code>ã§Rubyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹éš›ã«ã€ä¸€ç·’ã«å¿…è¦ãªgemã‚’å…¥ã‚Œã¦ãã‚Œã‚‹ã€‚</p>

<p><code>bash
$ echo 'bundler' &gt;&gt; ~/.rbenv/default-gems
</code></p>

<p>ã²ã¨ã¾ãšbundlerã ã‘ã§ã„ã„ã‹ãªã€‚</p>

<p>```bash</p>

<h1>ä¸€å¿œhomebrewã‚’å†åº¦æ›´æ–°</h1>

<p>$ brew update
$ brew upgrade</p>

<h1>ruby 2.0ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h1>

<p>$ rbenv install 2.0.0-p247
Downloading openssl-1.0.1e.tar.gz&hellip;
&ndash;> <a href="https://www.openssl.org/source/openssl-1.0.1e.tar.gz">https://www.openssl.org/source/openssl-1.0.1e.tar.gz</a>
Installing openssl-1.0.1e&hellip;</p>

<p>BUILD FAILED</p>

<p>Inspect or clean up the working tree at /var/folders/fz/6spm20xn2n34zk3rhc5q1b6c0000gn/T/ruby-build.20130922145805.39114
Results logged to /var/folders/fz/6spm20xn2n34zk3rhc5q1b6c0000gn/T/ruby-build.20130922145805.39114.log</p>

<p>Last 10 log lines:
RANLIB        =true
ARFLAGS       =
PERL          =/usr/bin/perl
SIXTY_FOUR_BIT_LONG mode
DES_UNROLL used
DES_INT used
RC4 uses uchar
RC4_CHUNK is unsigned long
sh: make: command not found
/usr/local/bin/ruby-build: line 387: make: command not found
```</p>

<p>makeã‚³ãƒãƒ³ãƒ‰ãŒãªã„ã½ã„ã€‚<br/>
command line toolsãŒå…¥ã£ã¦ãªã‹ã£ãŸã€‚</p>

<p><code>
Xcode -&gt; Preferences -&gt; Downloads -&gt; Command Line Tools -&gt; Install
</code></p>

<p>ãƒªãƒˆãƒ©ã‚¤ã€‚</p>

<p>```bash
$ rbenv install 2.0.0-p247
Downloading openssl-1.0.1e.tar.gz&hellip;
&ndash;> <a href="https://www.openssl.org/source/openssl-1.0.1e.tar.gz">https://www.openssl.org/source/openssl-1.0.1e.tar.gz</a>
Installing openssl-1.0.1e&hellip;
Installed openssl-1.0.1e to /Users/kobtea/.rbenv/versions/2.0.0-p247</p>

<p>Downloading ruby-2.0.0-p247.tar.gz&hellip;
&ndash;> <a href="http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz">http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz</a>
Installing ruby-2.0.0-p247&hellip;
Installed ruby-2.0.0-p247 to /Users/kobtea/.rbenv/versions/2.0.0-p247</p>

<p>ERROR:  While executing gem &hellip; (Gem::FilePermissionError)</p>

<pre><code>You don't have write permissions into the /Library/Ruby/Gems/1.8 directory.
</code></pre>

<p>rbenv: error installing gem `bundler'
```</p>

<p>ä»Šåº¦ã¯æ¨©é™ãŒãªã„ã€‚<br/>
<a href="https://github.com/sstephenson/rbenv-default-gems/issues/7">Issue</a>ã«è¼‰ã£ã¦ã„ãŸã€‚<br/>
ã©ã†ã‚„ã‚‰ç’°å¢ƒå¤‰æ•°ã«<code>$RBENV_ROOT</code>ãŒå¿…è¦ã‚‰ã—ã„ã€‚</p>

<p><code>bash
$ rbenv root
</code></p>

<p>ã§è¡¨ç¤ºã•ã‚ŒãŸãƒ‘ã‚¹ã‚’.zprofileã¨ã‹ã«æ›¸ãã€‚</p>

<p><code>bash
$ echo 'export RBENV_ROOT=$HOME/.rbenv' &gt;&gt; ~/.zprofile
$ source ~/.zprofile
</code></p>

<p>ãƒªãƒˆãƒ©ã‚¤ã€‚</p>

<p>```bash
$ rbenv install 2.0.0-p247
rbenv: /Users/kobtea/.rbenv/versions/2.0.0-p247 already exists
continue with installation? (y/N) y
Downloading openssl-1.0.1e.tar.gz&hellip;
&ndash;> <a href="https://www.openssl.org/source/openssl-1.0.1e.tar.gz">https://www.openssl.org/source/openssl-1.0.1e.tar.gz</a>
Installing openssl-1.0.1e&hellip;
Installed openssl-1.0.1e to /Users/kobtea/.rbenv/versions/2.0.0-p247</p>

<p>Downloading ruby-2.0.0-p247.tar.gz&hellip;
&ndash;> <a href="http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz">http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz</a>
Installing ruby-2.0.0-p247&hellip;
Installed ruby-2.0.0-p247 to /Users/kobtea/.rbenv/versions/2.0.0-p247</p>

<p>Fetching: bundler-1.3.5.gem (100%)
Successfully installed bundler-1.3.5
Parsing documentation for bundler-1.3.5
Installing ri documentation for bundler-1.3.5
1 gem installed
```</p>

<p>ã§ããŸã€‚</p>

<p>```bash</p>

<h1>ruby, gemã®ãƒ‘ã‚¹ãŒ$RBENV_ROOTä»¥ä¸‹ã«å‘ã„ã¦ã„ã‚‹ã‹ç¢ºèª</h1>

<p>$ rbenv rehash
$ rbenv versions
* system (set by /Users/kobtea/.rbenv/version)
  2.0.0-p247
$ which ruby
/Users/kobtea/.rbenv/shims/ruby
$ which gem
/Users/kobtea/.rbenv/shims/gem</p>

<h1>ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª</h1>

<p>$ ruby &mdash;version
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
$ gem &mdash;version
1.3.6</p>

<h1>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’2.0ã«å¤‰æ›´</h1>

<p>$ rbenv global 2.0.0-p247
$ rbenv versions
  system
* 2.0.0-p247 (set by /Users/kobtea/.rbenv/version)</p>

<p>$ ruby &mdash;version
ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-darwin12.4.1]
$ gem &mdash;version
2.0.3
```</p>

<p>ã“ã‚“ã«ã¡ã¯Rubyã€‚</p>

<h2>è¿½è¨˜</h2>

<p>Macãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®readlineã¯ä½¿ã‚ãªã„ã»ã†ãŒã„ã„ã‚‰ã—ã„ã€‚<br/>
<code>rbenv install</code>ã™ã‚‹éš›ã«ã¯homebrewã§å…¥ã‚ŒãŸreadline, opensslã‚’æŒ‡å®šã™ã‚‹ã€‚<br/>
æŒ‡å®šã—ãªã„å ´åˆã€Macã ã¨irbã§ãƒãƒ«ãƒãƒã‚¤ãƒˆãŒä½¿ãˆãªã„ã€‚<br/>
<a href="/blog/2013/09/22/use-multibytes-on-ruby">irbã§æ—¥æœ¬èªãŒæ–‡å­—åŒ–ã‘ã™ã‚‹</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[irbã§æ—¥æœ¬èªãŒæ–‡å­—åŒ–ã‘ã™ã‚‹]]></title>
    <link href="http://blog.kobtea.net/blog/2013/09/22/use-multibytes-on-ruby/"/>
    <updated>2013-09-22T23:38:00+09:00</updated>
    <id>http://blog.kobtea.net/blog/2013/09/22/use-multibytes-on-ruby</id>
    <content type="html"><![CDATA[<p>```bash
$ sw_vers
ProductName:    Mac OS X
ProductVersion: 10.8.4
BuildVersion:   12E3067</p>

<p>$ ruby &mdash;version
ruby 2.0.0p247 (2013-06-27 revision 41674) [x86_64-darwin12.4.1]</p>

<p>$ irb &mdash;version
irb 0.9.6(09/06/30)
```</p>

<p>&lsquo;æ—¥æœ¬èª'ã¨æ‰“ã¨ã†ã¨ã™ã‚‹ã¨ã“ã†ãªã‚‹ã€‚</p>

<p><code>ruby
$ irb
irb(main):001:0&gt; p '\U+FFE6\U+FFA5\U+FFE6\U+FFAC\U+FFE8\U+FFAA'
""
=&gt; ""
</code></p>

<p>è‰²ã€…èª¿ã¹ã¦ã¿ãŸã‚‰Macãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®readlineãŒã‚ã‚“ã¾ã‚Šã‚¤ã‚±ã¦ãªã„ã¨ã®ã“ã¨ã€‚</p>

<blockquote><p>irb ã§æ—¥æœ¬èªã‚’ä½¿ã†ãªã‚‰ã°ã€ä¸‹è¨˜ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚<br/>
<code>bash
CONFIGURE_OPTS="--with-readline-dir=`brew --prefix readline` --enable-bundled-libyaml" rbenv install 2.0.0-p247
</code></p>

<p><a href="http://www.d-wood.com/blog/2013/08/06_4453.html">[Ruby on Rails] RUBY_CONFIGURE_OPTS, readline, openssl</a></p></blockquote>

<p>```bash</p>

<h1>readlineã¨opensslã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h1>

<p>$ brew install readline
$ brew install openssl</p>

<h1>å‚è€ƒé€šã‚Šã«ã‚„ã£ã¦ã¿ã‚‹</h1>

<p>$ CONFIGURE_OPTS=&ldquo;&mdash;with-readline-dir=<code>brew --prefix readline</code> &mdash;enable-bundled-libyaml&rdquo; rbenv install 2.0.0-p247
rbenv: /Users/kobtea/.rbenv/versions/2.0.0-p247 already exists
continue with installation? (y/N) y
Downloading ruby-2.0.0-p247.tar.gz&hellip;
&ndash;> <a href="http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz">http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p247.tar.gz</a>
Installing ruby-2.0.0-p247&hellip;
Installed ruby-2.0.0-p247 to /Users/kobtea/.rbenv/versions/2.0.0-p247</p>

<p>Fetching: bundler-1.3.5.gem (100%)
Successfully installed bundler-1.3.5
Parsing documentation for bundler-1.3.5
Installing ri documentation for bundler-1.3.5
1 gem installed
```</p>

<p>ã©ãã©ã&hellip;</p>

<p><code>ruby
$ irb
irb(main):001:0&gt; puts 'ã»ã’'
ã»ã’
=&gt; nil
irb(main):002:0&gt; p 'ã»ã’'
"ã»ã’"
=&gt; "ã»ã’"
</code></p>

<p>ã‚„ã£ãŸã‚ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼<br/>
æœ¬å½“ã«ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>
]]></content>
  </entry>
  
</feed>
